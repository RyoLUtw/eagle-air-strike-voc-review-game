<!-- ...existing code... -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Hexagon grid â€” side 5</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --hex-size: 36; /* adjust for hex size */
      --stroke: #333;
      --fill: #7fb3ff;
      --fill-2: #a8e6a1;
    }
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;}
    .wrap{height:100%;display:flex;align-items:center;justify-content:center;background:#111;}
    svg{background:linear-gradient(180deg,#0e1220,#0b0f16);border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,.6)}
    polygon.hex{stroke:var(--stroke);stroke-width:1.5px;fill:var(--fill);opacity:0.95}
    polygon.hex.alt{fill:var(--fill-2)}
    text.coord{pointer-events:none;fill:#062;fill-opacity:0.95;font-size:11px;font-weight:600;text-anchor:middle;dominant-baseline:central}
  </style>
</head>
<body>
  <div class="wrap">
    <svg id="grid"></svg>
  </div>

  <script>
    // create a pointy-top hexagon grid (axial coordinates)
    // "side length 5" => radius = 4 (distance from center to any side)
    (function(){
      const side = 5;
      const radius = side - 1; // 4
      const hexSize = Number(getComputedStyle(document.documentElement).getPropertyValue('--hex-size')) || 36;
      const sqrt3 = Math.sqrt(3);

      const hexCorners = (cx, cy, size) => {
        // pointy-top hex corners (starting at angle 0 = rightmost corner)
        const pts = [];
        for(let i=0;i<6;i++){
          const angle = Math.PI/180 * (60 * i - 30); // -30 for pointy-top
          pts.push([cx + size * Math.cos(angle), cy + size * Math.sin(angle)]);
        }
        return pts;
      };

      const axialToPixel = (q, r, size) => {
        // pointy-top axial to pixel
        const x = size * sqrt3 * (q + r/2);
        const y = size * 3/2 * r;
        return [x, y];
      };

      // collect hexes within radius
      const hexes = [];
      for(let q = -radius; q <= radius; q++){
        for(let r = -radius; r <= radius; r++){
          const s = -q - r;
          if(Math.abs(s) <= radius){
            hexes.push({q, r});
          }
        }
      }

      // compute pixel positions and extents
      const positions = hexes.map(h => {
        const [x,y] = axialToPixel(h.q, h.r, hexSize);
        return {q:h.q, r:h.r, x, y};
      });

      // determine bounding box
      let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
      positions.forEach(p => {
        const corners = hexCorners(p.x, p.y, hexSize);
        corners.forEach(([cx,cy]) => {
          minX = Math.min(minX, cx);
          maxX = Math.max(maxX, cx);
          minY = Math.min(minY, cy);
          maxY = Math.max(maxY, cy);
        });
      });

      // add padding
      const pad = 12;
      minX -= pad; minY -= pad; maxX += pad; maxY += pad;
      const width = maxX - minX;
      const height = maxY - minY;

      const svg = document.getElementById('grid');
      svg.setAttribute('width', Math.min(width, window.innerWidth-40));
      svg.setAttribute('height', Math.min(height, window.innerHeight-40));
      svg.setAttribute('viewBox', `${minX} ${minY} ${width} ${height}`);
      svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');

      // render hexagons
      positions.forEach((p, i) => {
        const corners = hexCorners(p.x, p.y, hexSize);
        const points = corners.map(pt => pt.join(',')).join(' ');
        const poly = document.createElementNS('http://www.w3.org/2000/svg','polygon');
        poly.setAttribute('points', points);
        poly.setAttribute('class', 'hex' + ((Math.abs(p.q + p.r) % 2 === 0) ? ' alt':'')); // simple alternation
        poly.setAttribute('data-axial', `${p.q},${p.r}`);
        svg.appendChild(poly);

        const text = document.createElementNS('http://www.w3.org/2000/svg','text');
        text.setAttribute('x', p.x);
        text.setAttribute('y', p.y);
        text.setAttribute('class','coord');
        text.textContent = `${p.q},${p.r}`;
        svg.appendChild(text);
      });

    })();
  </script>
</body>
</html>
<!-- ...existing code... -->